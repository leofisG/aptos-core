apiVersion: v1
kind: Pod
metadata:
  name: {{ include "aptos-node-health-checker.fullname" . }}-sync-test
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: {{ include "aptos-node-health-checker.fullname" . }}-sync-test
      image: byrnedo/alpine-curl:0.1.8@sha256:548379d0a4a0c08b9e55d9d87a592b7d35d9ab3037f4936f5ccd09d0b625a342
      imagePullPolicy: {{ .Values.image.pullPolicy }}
      command:
        - sh
        - -c
        - |-
          set -ex
          curl --fail http://{{ include "aptos-node-health-checker.fullname" . }}-lb:80/configuration_keys
  restartPolicy: Never
